<section>
  <h2>用户资料</h2>
  <ng-container
    *ngIf="userInfo; then userinfoView; else loading"
  ></ng-container>
  <ng-template #userinfoView>
    <mat-card>
      <mat-card-header>
        <mat-card-title>
          {{ userInfo.username }}
        </mat-card-title>
        <mat-card-subtitle>
          {{ userInfo.email }}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>总磁盘: {{ userInfo.disk_limit }}</p>
        <p>已使用: {{ userInfo.disk_usage }}</p>
      </mat-card-content>
    </mat-card>
  </ng-template>
</section>
<app-sized-box height="20"></app-sized-box>
<section class="images-grid">
  <h2>Pictures</h2>
  <ng-container
    *ngIf="images && images.length; then thenTemp; else loading"
  ></ng-container>

  <ng-template #thenTemp>
    <ng-container *ngFor="let image of images.reverse()">
      <div class="image-info">
        <mat-icon
          class="del"
          title="注意：这将永久删除资源"
          (click)="delete(image.hash)"
          >delete</mat-icon
        >
        <img [src]="image.url" (click)="open(image.url)" />

        <div class="info">
          <p>{{ image.filename }}</p>
          <p>{{ image.size | imageSize }}</p>

          <button
            mat-button
            class="image-url-button"
            [attr.data-clipboard-text]="image.url"
            title="点击复制"
          >
            {{ image.url }}
          </button>
        </div>
      </div>
    </ng-container>
  </ng-template>
</section>

<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
